"use strict";angular.module("skApp",["ngAnimate","ngRoute","ngResource"]).config(["$routeProvider",function(a){a.when("/artists/:search?",{templateUrl:"views/search.html",controller:"SearchCtrl"}).when("/artist/:mbid",{templateUrl:"views/artist.html",controller:"ArtistCtrl"}).otherwise({redirectTo:"/artists"})}]).value({apiKey:"jhevSy2yQF6HFzmb"}),angular.module("skApp").controller("SearchCtrl",["$scope","$location","$routeParams","artistsFact",function(a,b,c,d){a.artistInput="happy",a.newContact=!1,a.getResults=function(c){c=c.toLowerCase(),d.artistSearch.get({query:c},function(d){a.search!==c&&(b.url("artists/"+c),a.search=c),a.artists=d.resultsPage.results.artist})};(function(){a.artistInput=a.search=c.search,a.search&&a.getResults(a.search)})()}]),angular.module("skApp").controller("ArtistCtrl",["$scope","$location","$routeParams","artistsFact",function(a,b,c,d){a.search={},a.artist=d.artistGet.get({mbid:c.mbid},function(b){a.artist=b.resultsPage.results.artist})}]),angular.module("skApp").factory("artistsFact",["$filter","$resource","$cacheFactory","apiKey",function(a,b,c,d){var e=c("artists"),f=b("http://api.songkick.com/api/3.0/search/artists.json",{apikey:d},{get:{cache:e}}),g=b("http://api.songkick.com/api/3.0/artists/mbid::mbid.json",{apikey:d});return{artistSearch:f,artistGet:g,artistCache:e}}]),angular.module("skApp").directive("oInput",["$timeout",function(a){return{restrict:"A",require:"ngModel",scope:{ngModel:"="},compile:function(b,c){return{pre:function(a,b,c){var d=["Icn"],e=b.wrap("<div class='o-input'></div>").parent().addClass("Pristine");"false"!==c.icons&&(c.disabled&&d.push("Disabled"),e.addClass(d.join(" ")).append("<div class='icn Blank'><i class='fa'></i></div>"))},post:function(b,c,d,e){var f=c.parent(),g=["removeClass","addClass"],h={},i=function(b){b||f[g[0]]("Pristine"),a(function(){e.$valid!==h.valid&&(f[g[Number(e.$valid)]]("Valid")[g[Number(!e.$valid)]]("Invalid"),h.valid=e.$valid)})};c.bind("focus",function(a){f.addClass("Focus")}).bind("blur",function(a){f.removeClass("Focus")}),e.$viewChangeListeners.push(i),i(!0)}}}}}]),angular.module("skApp").directive("utBackButton",["$window",function(a){return{restrict:"A",link:function(b,c,d){c.bind("click",function(){console.log("back button click"),a.history.back()})}}}]),angular.module("skApp").filter("nav",["$window",function(a){var b="#",c={search:function(a){return a=a||"",b+"/artists/"+a},artist:function(a){var c=b+"/artist/";return a.identifier&&void 0!==a.identifier[0]&&(c+=a.identifier[0].mbid),c},ex_artist:function(a){return a.uri}};return function(a,b){var d=Array.prototype.slice.call(arguments,1,arguments.length);if(c[a]){var e=c[a].apply(c[a],d);return e}return"URL_NOT_FOUND"}}]);